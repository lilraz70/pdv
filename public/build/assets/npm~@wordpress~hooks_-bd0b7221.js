function y(e){return typeof e!="string"||e===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}function a(e){return typeof e!="string"||e===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}function _(e,o){return function(n,t,s,r=10){const u=e[o];if(!a(n)||!y(t))return;if(typeof s!="function"){console.error("The hook callback must be a function.");return}if(typeof r!="number"){console.error("If specified, the hook priority must be a number.");return}const c={callback:s,priority:r,namespace:t};if(u[n]){const l=u[n].handlers;let i;for(i=l.length;i>0&&!(r>=l[i-1].priority);i--);i===l.length?l[i]=c:l.splice(i,0,c),u.__current.forEach(h=>{h.name===n&&h.currentIndex>=i&&h.currentIndex++})}else u[n]={handlers:[c],runs:0};n!=="hookAdded"&&e.doAction("hookAdded",n,t,s,r)}}function d(e,o,f=!1){return function(t,s){const r=e[o];if(!a(t)||!f&&!y(s))return;if(!r[t])return 0;let u=0;if(f)u=r[t].handlers.length,r[t]={runs:r[t].runs,handlers:[]};else{const c=r[t].handlers;for(let l=c.length-1;l>=0;l--)c[l].namespace===s&&(c.splice(l,1),u++,r.__current.forEach(i=>{i.name===t&&i.currentIndex>=l&&i.currentIndex--}))}return t!=="hookRemoved"&&e.doAction("hookRemoved",t,s),u}}function p(e,o){return function(n,t){const s=e[o];return typeof t<"u"?n in s&&s[n].handlers.some(r=>r.namespace===t):n in s}}function H(e,o,f=!1){return function(t,...s){const r=e[o];r[t]||(r[t]={handlers:[],runs:0}),r[t].runs++;const u=r[t].handlers;if(!u||!u.length)return f?s[0]:void 0;const c={name:t,currentIndex:0};for(r.__current.push(c);c.currentIndex<u.length;){const i=u[c.currentIndex].callback.apply(null,s);f&&(s[0]=i),c.currentIndex++}if(r.__current.pop(),f)return s[0]}}function A(e,o){return function(){var s;var n;const t=e[o];return(n=(s=t.__current[t.__current.length-1])==null?void 0:s.name)!==null&&n!==void 0?n:null}}function b(e,o){return function(n){const t=e[o];return typeof n>"u"?typeof t.__current[0]<"u":t.__current[0]?n===t.__current[0].name:!1}}function v(e,o){return function(n){const t=e[o];if(a(n))return t[n]&&t[n].runs?t[n].runs:0}}class g{constructor(){this.actions=Object.create(null),this.actions.__current=[],this.filters=Object.create(null),this.filters.__current=[],this.addAction=_(this,"actions"),this.addFilter=_(this,"filters"),this.removeAction=d(this,"actions"),this.removeFilter=d(this,"filters"),this.hasAction=p(this,"actions"),this.hasFilter=p(this,"filters"),this.removeAllActions=d(this,"actions",!0),this.removeAllFilters=d(this,"filters",!0),this.doAction=H(this,"actions"),this.applyFilters=H(this,"filters",!0),this.currentAction=A(this,"actions"),this.currentFilter=A(this,"filters"),this.doingAction=b(this,"actions"),this.doingFilter=b(this,"filters"),this.didAction=v(this,"actions"),this.didFilter=v(this,"filters")}}function x(){return new g}x();export{x as c};
