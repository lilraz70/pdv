import{F as w,a as d,n as b,b as m}from"./bootstrap-b8cd97d4.js";import{_ as a}from"./currency-dc6217f5.js";import{w as F}from"./npm~@vue~runtime-dom_-2c8e0ca9.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";import{f as V}from"./npm~rxjs-eeb06f17.js";import{an as u,af as t,G as s,H as i,F as T,al as B,z as v,A as l,c as p,aH as y,M as R}from"./npm~@vue~runtime-core_-0a26b3ab.js";import{V as f}from"./npm~@vue~shared_-5bb087a6.js";import"./npm~lodash-3db1c062.js";import"./npm~@ckeditor~ckeditor5-build-classic_-b5d88964.js";import"./npm~laravel-echo-0c2ba8ed.js";import"./npm~pusher-js-bd96ae31.js";import"./npm~axios-c24e582b.js";import"./npm~chart.js-3fed1729.js";import"./npm~moment-a9aaa855.js";import"./npm~vue-0182d78b.js";import"./npm~@vue~compiler-dom_-ce2c1e21.js";import"./npm~@vue~compiler-core_-745c8708.js";import"./npm~@vue~reactivity_-26e9e2f4.js";import"./npm~rx-f450d610.js";import"./npm~@wordpress~hooks_-bd0b7221.js";import"./npm~mathjs-b10bd4cd.js";import"./npm~@babel~runtime_-9313f80d.js";import"./npm~decimal.js-d133ee8e.js";import"./npm~complex.js-dc0d19c5.js";import"./npm~fraction.js-cb0643cb.js";import"./npm~typed-function-de33f2d8.js";import"./npm~seedrandom-37239647.js";import"./npm~javascript-natural-sort-11e7fc54.js";import"./npm~escape-latex-404addb9.js";import"./npm~tslib-8dbab242.js";import"./npm~numeral-304d6dd9.js";import"./npm~currency.js-57f74176.js";const X={name:"ns-login",props:["showRecoveryLink","showRegisterButton"],data(){return{fields:[],xXsrfToken:null,validation:new w,isSubitting:!1}},mounted(){V({login:d.get("/api/fields/ns.login"),csrf:d.get("/sanctum/csrf-cookie")}).subscribe({next:o=>{this.fields=this.validation.createFields(o.login),this.xXsrfToken=d.response.config.headers["X-XSRF-TOKEN"],setTimeout(()=>b.doAction("ns-login-mounted",this),100)},error:o=>{m.error(o.message||a("An unexpected error occurred."),a("OK"),{duration:0}).subscribe()}})},methods:{__:a,signIn(){if(!this.validation.validateFields(this.fields))return m.error(a("Unable to proceed the form is not valid.")).subscribe();this.validation.disableFields(this.fields),b.applyFilters("ns-login-submit",!0)&&(this.isSubitting=!0,d.post("/auth/sign-in",this.validation.getValue(this.fields),{headers:{"X-XSRF-TOKEN":this.xXsrfToken}}).subscribe({next:e=>{document.location=e.data.redirectTo},error:e=>{this.isSubitting=!1,this.validation.enableFields(this.fields),e.data&&this.validation.triggerFieldsErrors(this.fields,e.data),m.error(e.message||a("An unexpected error occured.")).subscribe()}}))}}},N={class:"ns-box rounded shadow overflow-hidden transition-all duration-100"},C={class:"ns-box-body"},K={class:"p-3 -my-2"},j={key:0,class:"flex items-center justify-center py-10"},A={key:1,class:"flex w-full items-center justify-center py-4"},E={href:"/password-lost",class:"hover:underline text-blue-600 text-sm"},H={class:"flex justify-between items-center border-t ns-box-footer p-3"},I={key:0};function L(o,e,_,z,n,r){const k=u("ns-field"),h=u("ns-spinner"),g=u("ns-button");return t(),s("div",N,[i("div",C,[i("div",K,[n.fields.length>0?(t(),s("div",{key:0,class:"py-2 fade-in-entrance anim-duration-300",onKeyup:e[0]||(e[0]=F(c=>r.signIn(),["enter"]))},[(t(!0),s(T,null,B(n.fields,(c,x)=>(t(),v(k,{key:x,field:c},null,8,["field"]))),128))],32)):l("",!0)]),n.fields.length===0?(t(),s("div",j,[p(h,{border:"4",size:"16"})])):l("",!0),_.showRecoveryLink?(t(),s("div",A,[i("a",E,f(r.__("Password Forgotten ?")),1)])):l("",!0)]),i("div",H,[i("div",null,[p(g,{disabled:n.isSubitting,onClick:e[1]||(e[1]=c=>r.signIn()),class:"justify-between",type:"info"},{default:y(()=>[n.isSubitting?(t(),v(h,{key:0,class:"mr-2",size:"6"})):l("",!0),i("span",null,f(r.__("Sign In")),1)]),_:1},8,["disabled"])]),_.showRegisterButton?(t(),s("div",I,[p(g,{link:!0,href:"/sign-up",type:"success"},{default:y(()=>[R(f(r.__("Register")),1)]),_:1})])):l("",!0)])])}const ve=S(X,[["render",L]]);export{ve as default};
